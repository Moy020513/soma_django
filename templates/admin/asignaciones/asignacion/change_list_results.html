{% load i18n %}

<style>
    .results{
        margin-left: 0;
    }
    .text {
        width: auto; 
    }
 
    #result_list th, #result_list td {
        border: 1px solid #b6b6b6ff;
        padding: 10px;
        text-align: left;
    }
                #result_list th {
                    background: #000a46ff;
                    color: #fff;
                    font-weight: 600;
                    letter-spacing: 0.5px;
                    font-size: 12px !important;
                    text-align: center !important;
                    height: 25px !important;
                    width: auto !important;
                }
                .btn-action {
                    border: none;
                    border-radius: 4px;
                    padding: 4px 14px;
                    font-size: 13px;
                    font-weight: 500;
                    margin-left: 6px;
                    cursor: pointer;
                    text-decoration: none;
                    display: inline-block;
                    transition: background 0.2s;
                }
                .btn-action.update {
                    background: #1976d2;
                    color: #fff !important;
                }
                .btn-action.history {
                    background: #388e3c;
                    color: #fff !important;
                }
                .btn-action.delete {
                    background: #d32f2f;
                    color: #fff !important;
                }
                .btn-action:hover {
                    opacity: 0.85;
                    text-decoration: underline;
                }
    #result_list tbody tr {
        transition: background 0.2s;
    }
    #result_list tbody tr:hover {
        background: #eaf6ff;
    }
    #result_list a {
        color: #1976d2;
        text-decoration: none;
        font-weight: 500;
    }
    #result_list a:hover {
        text-decoration: underline;
    }
</style>
<div class="results" style="width:100%;">
<table id="result_list" style="width:100%;">
<thead>
<tr>
    <th scope="col"><div class="text"><span>No. cotizaci√≥n</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>FECHA</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>EMPLEADOS</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>EMPRESA</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>SUPERVISOR</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>DETALLES</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>DOCUMENTO</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span># ACTIVIDADES</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>HISTORIAL</span></div><div class="clear"></div></th>
    <th scope="col"><div class="text"><span>ACCIONES</span></div><div class="clear"></div></th>
</tr>
</thead>
<tbody>
{% for obj in cl.result_list %}
<tr>
    <td>{{ obj.numero_cotizacion|default:'-' }}</td>
    <td>{{ obj.fecha|date:"d/m/Y" }}</td>
    <td style="text-align:center">{{ obj.empleados.count }}</td>
    <td>{{ obj.empresa }}</td>
    <td style="white-space:nowrap">{{ obj.supervisor.nombre_primer_apellido|default:'-' }}</td>
    <td>{{ obj.detalles }}</td>
    <td>{% if obj.archivo_nombre %}<a href="{{ obj.archivos.url }}" target="_blank">{{ obj.archivo_nombre }}</a>{% else %}-{% endif %}</td>
    <td style="text-align:center;">{{ obj.actividades_total }}</td>
    <td style="text-align:center;">
        <a href="{% url 'admin:asignaciones_asignacion_historial' obj.pk %}" class="btn-action history">Historial</a>
    </td>
        <td style="text-align:right;">
            <a href="{{ obj.get_admin_url }}" class="btn-action update">Actualizar</a>
            <a href="{% url 'admin:asignaciones_asignacion_delete' obj.pk %}" class="btn-action delete">Eliminar</a>
        </td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
