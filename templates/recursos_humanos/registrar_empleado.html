{% extends 'base.html' %}
{% block title %}Registrar empleado{% endblock %}
{% block page_title %}Registrar empleado{% endblock %}
{% block content %}
<div class="container py-3">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header">
          <strong>Nuevo empleado</strong>
        </div>
        <div class="card-body">
          {% if messages %}
            {% for message in messages %}
              <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
          {% endif %}
          <form method="post" novalidate>
            {% csrf_token %}
            {% if form.non_field_errors %}
              <div class="alert alert-danger">{{ form.non_field_errors }}</div>
            {% endif %}

            <h5 class="mb-3">Cuenta</h5>
            <div class="row g-3 mb-2">
              <div class="col-md-6">
                <label class="form-label">{{ form.usuario.label }}</label>
                {{ form.usuario }}
                <div class="form-text">Selecciona un usuario existente activo y sin empleado asignado.</div>
                {{ form.usuario.errors }}
              </div>
              <div class="col-md-6 d-flex align-items-end">
                <a href="{% url 'admin:usuarios_usuario_add' %}" class="btn btn-outline-secondary btn-sm">
                  <i class="fas fa-user-plus me-1"></i> Crear usuario en Admin
                </a>
              </div>
            </div>

            <h5 class="mb-3">Datos personales</h5>
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">{{ form.nombre.label }}</label>
                {{ form.nombre }}
                {{ form.nombre.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.apellido_paterno.label }}</label>
                {{ form.apellido_paterno }}
                {{ form.apellido_paterno.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.apellido_materno.label }}</label>
                {{ form.apellido_materno }}
                {{ form.apellido_materno.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.telefono.label }}</label>
                {{ form.telefono }}
                <div class="form-text">10 dígitos, solo números</div>
                {{ form.telefono.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.nss.label }}</label>
                {{ form.nss }}
                {{ form.nss.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.curp.label }}</label>
                {{ form.curp }}
                <div class="form-text">18 caracteres. Se guardará en mayúsculas.</div>
                {{ form.curp.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.rfc.label }}</label>
                {{ form.rfc }}
                <div class="form-text">Opcional</div>
                {{ form.rfc.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.fecha_nacimiento.label }}</label>
                {{ form.fecha_nacimiento }}
                {{ form.fecha_nacimiento.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.sexo.label }}</label>
                {{ form.sexo }}
                {{ form.sexo.errors }}
              </div>
            </div>

            <hr class="my-4" />
            <h5 class="mb-3">Datos laborales</h5>
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">{{ form.fecha_ingreso.label }}</label>
                {{ form.fecha_ingreso }}
                {{ form.fecha_ingreso.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.puesto.label }}</label>
                {{ form.puesto }}
                {{ form.puesto.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.lugar_de_pertenencia.label }}</label>
                {{ form.lugar_de_pertenencia }}
                {{ form.lugar_de_pertenencia.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ form.salario_inicial.label }}</label>
                {{ form.salario_inicial }}
                {{ form.salario_inicial.errors }}
              </div>
            </div>
            <div class="row g-3 mt-2">
              <div class="col-md-4">
                <label class="form-label">{{ form.salario_actual.label }}</label>
                {{ form.salario_actual }}
                {{ form.salario_actual.errors }}
              </div>
            </div>

            <hr class="my-4" />
            <h5 class="mb-3">Periodo de estatus inicial</h5>
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">{{ periodo_form.estatus.label }}</label>
                {{ periodo_form.estatus }}
                {{ periodo_form.estatus.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ periodo_form.fecha_inicio.label }}</label>
                {{ periodo_form.fecha_inicio }}
                {{ periodo_form.fecha_inicio.errors }}
              </div>
              <div class="col-md-4">
                <label class="form-label">{{ periodo_form.observaciones.label }}</label>
                {{ periodo_form.observaciones }}
                {{ periodo_form.observaciones.errors }}
              </div>
            </div>

            <div class="d-flex gap-2 mt-4">
              <button class="btn btn-primary" type="submit">
                <i class="fas fa-save me-1"></i> Guardar
              </button>
              <a class="btn btn-outline-secondary" href="{% url 'admin:recursos_humanos_empleado_changelist' %}">Cancelar</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
