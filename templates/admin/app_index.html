{% extends "admin/base_site.html" %}
{% load i18n %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'home' %}">{% trans 'Home' %}</a>
    &rsaquo; {{ title }}
  </div>
{% endblock %}

{% block content %}
<div class="app-list-header">
    <h1>
        {% if app_list and app_list.0.app_label == 'auth' %}Autenticación y Autorización
        {% elif app_list and app_list.0.app_label == 'usuarios' %}Gestión de Usuarios
        {% elif app_list and app_list.0.app_label == 'empresas' %}Empresas
        {% elif app_list and app_list.0.app_label == 'flota_vehicular' %}Flota Vehicular
        {% elif app_list and app_list.0.app_label == 'herramientas' %}Herramientas
        {% elif app_list and app_list.0.app_label == 'notificaciones' %}Notificaciones
        {% elif app_list and app_list.0.app_label == 'recursos_humanos' %}Recursos Humanos
        {% else %}{{ title }}{% endif %}
    </h1>
  </div>

  <div class="app-list-content">
    {% for app in app_list %}
        <div class="app-card">
            <div class="app-header">
                <h2>
                    {% if app.app_label == 'auth' %}Autenticación y Autorización
                    {% elif app.app_label == 'usuarios' %}Gestión de Usuarios
                    {% elif app.app_label == 'empresas' %}Empresas
                    {% elif app.app_label == 'flota_vehicular' %}Flota Vehicular
                    {% elif app.app_label == 'herramientas' %}Herramientas
                    {% elif app.app_label == 'notificaciones' %}Notificaciones
                    {% elif app.app_label == 'recursos_humanos' %}Recursos Humanos
                    {% else %}{{ app.name }}{% endif %}
                </h2>
                <div class="app-models-count">{{ app.models|length }} {% if app.models|length == 1 %}{% trans 'model' %}{% else %}{% trans 'models' %}{% endif %}</div>
            </div>

            <div class="app-models">
                {% for model in app.models %}
                    <div class="model-item">
                        <a href="{{ model.admin_url }}" class="model-link">
                            <div class="model-icon">
                                <i class="fas fa-cube"></i>
                            </div>
                            <div class="model-info d-flex w-100 justify-content-between align-items-center">
                                <div class="model-name">{{ model.name }}</div>
                                <span class="btn btn-sm btn-primary">
                                    <i class="fas fa-sliders-h me-1"></i> {% trans 'Administrar' %}
                                </span>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% empty %}
        <p class="text-muted">{% trans 'No models available.' %}</p>
    {% endfor %}
  </div>
{% endblock %}

{% block extrastyle %}
<style>
.app-list-header { margin-bottom: 2rem; }
.app-list-header h1 { color: var(--soma-blue); font-size: 2rem; font-weight: 600; margin: 0; }
.app-list-content { display: grid; gap: 2rem; }
.app-card { background: white; border-radius: 1rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); overflow: hidden; }
.app-header { background: linear-gradient(135deg, var(--soma-blue), var(--soma-blue-light)); color: white; padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
.app-header h2 { margin: 0; font-size: 1.25rem; font-weight: 600; }
.app-models-count { background: rgba(255,255,255,0.2); padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.9rem; font-weight: 500; }
.app-models { padding: 1.5rem; display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }
.model-item { background: linear-gradient(135deg, var(--soma-light-gray), #f8f9fa); border-radius: 0.75rem; overflow: hidden; transition: all 0.3s ease; }
.model-item:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
.model-link { display: flex; align-items: center; padding: 1rem; text-decoration: none; color: inherit; height: 100%; }
.model-icon { width: 40px; height: 40px; background: linear-gradient(45deg, var(--soma-orange), var(--soma-orange-light)); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; color: white; margin-right: 1rem; font-size: 1.2rem; }
.model-info { flex: 1; }
.model-name { font-weight: 600; color: var(--soma-blue); margin-bottom: 0.25rem; }
@media (max-width: 768px) {
  .app-models { grid-template-columns: 1fr; }
  .app-header { flex-direction: column; gap: 1rem; text-align: center; }
}
</style>
{% endblock %}
